# ProNetworkAppÙSpot - Development Roadmap
# Ø®Ø§Ø±Ø·Ø© Ø·Ø±ÙŠÙ‚ Ø§Ù„ØªØ·ÙˆÙŠØ±

> **Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«**: 2026-02-18
> **Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ**: v1.1 - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù…ÙƒØªÙ…Ù„

---

## Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø¹Ø§Ù…Ø©

| Ø§Ù„Ù…Ø±Ø­Ù„Ø© | Ø§Ù„ÙˆØµÙ | Ø§Ù„Ø­Ø§Ù„Ø© |
|--------|------|--------|
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1 | Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Dashboard | âœ… Ù…ÙƒØªÙ…Ù„Ø© |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2 | Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø°ÙƒÙŠØ© + Ø§Ù„ÙØ±Ø² Ø§Ù„Ù…ØªÙ‚Ø¯Ù… + Ø¯Ø¹Ù… SETTLED | âœ… Ù…ÙƒØªÙ…Ù„Ø© |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3 | ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØµØ¯ÙŠØ± + ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© + Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ | â­• Ù„Ù… ÙŠØ¨Ø¯Ø£ |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4 | Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª + Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ + Ø§Ù„Ø«ÙŠÙ…Ø§Øª | â­• Ù„Ù… ÙŠØ¨Ø¯Ø£ |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5 | Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© | â­• Ù„Ù… ÙŠØ¨Ø¯Ø£ |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6 | Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³Ù†ÙˆÙŠ | â­• Ù„Ù… ÙŠØ¨Ø¯Ø£ |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7 | Ø§Ù„Ø­Ù…Ø§ÙŠØ© (Ø¨ØµÙ…Ø©/Ø±Ù‚Ù… Ø³Ø±ÙŠ) | â­• Ù„Ù… ÙŠØ¨Ø¯Ø£ |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 8 | Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ© | â­• Ù„Ù… ÙŠØ¨Ø¯Ø£ |

---

## Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Dashboard)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©**: Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹ | **Ø§Ù„Ø¬Ù‡Ø¯**: Ù…ØªÙˆØ³Ø· | **Ø§Ù„ØªØ£Ø«ÙŠØ±**: Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹

### Ø§Ù„Ù‡Ø¯Ù
Ø´Ø§Ø´Ø© Ø±Ø¦ÙŠØ³ÙŠØ© ØªØ¸Ù‡Ø± Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØªØ¹Ø·ÙŠ Ù„Ù…Ø­Ø© Ø´Ø§Ù…Ù„Ø© Ø¹Ù† Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­ØµÙŠÙ„ ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡.

### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

#### 1.1 Ø¥Ù†Ø´Ø§Ø¡ DashboardScreen.kt (Ø¬Ø¯ÙŠØ¯)
**Ø§Ù„Ù…Ø³Ø§Ø±**: `app/src/main/java/com/pronetwork/app/ui/screens/DashboardScreen.kt`

**Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª**:
- **Ø¨Ø·Ø§Ù‚Ø© ØªØ±Ø­ÙŠØ¨**: Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ + Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ + Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨
- **3 Ø¨Ø·Ø§Ù‚Ø§Øª KPI Ø±Ø¦ÙŠØ³ÙŠØ©**:
    - Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­ØµÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø± (Ø¨Ø§Ù„Ø±ÙŠØ§Ù„)
    - Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ØµÙŠÙ„ (Ù…Ø¹ Ù…Ø¤Ø´Ø± Ø¯Ø§Ø¦Ø±ÙŠ CircularProgressIndicator)
    - Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ†
- **Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©**: Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø± vs Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚ (Ø³Ù‡Ù… Ø£Ø®Ø¶Ø± Ù„Ù„Ø²ÙŠØ§Ø¯Ø© / Ø£Ø­Ù…Ø± Ù„Ù„Ù†Ù‚ØµØ§Ù†)
- **Ù‚Ø§Ø¦Ù…Ø© "ÙŠØ­ØªØ§Ø¬ Ø§Ù†ØªØ¨Ø§Ù‡Ùƒ"**: Ø£Ù‡Ù… 5 Ø¹Ù…Ù„Ø§Ø¡ ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹ÙŠÙ† Ø¨Ø£Ø¹Ù„Ù‰ Ù…Ø¨Ø§Ù„Øº
- **Ø¢Ø®Ø± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª**: Ø¢Ø®Ø± 5 Ø¹Ù…Ù„ÙŠØ§Øª ØªØ­ØµÙŠÙ„
- **Ø£Ø²Ø±Ø§Ø± Ø³Ø±ÙŠØ¹Ø©**: "Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ" + "Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„"

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª (Parameters)**:
```kotlin
@Composable
fun DashboardScreen(
    currentMonthStats: PaymentViewModel.MonthStats?,
    previousMonthStats: PaymentViewModel.MonthStats?,
    totalClients: Int,
    totalBuildings: Int,
    recentTransactions: List<RecentTransaction>,
    topUnpaidClients: List<UnpaidClientInfo>,
    onNavigateToDaily: () -> Unit,
    onNavigateToClients: () -> Unit,
    onNavigateToStats: () -> Unit
)

1.2 Ø¥Ù†Ø´Ø§Ø¡ DashboardViewModel.kt (Ø¬Ø¯ÙŠØ¯)
Ø§Ù„Ù…Ø³Ø§Ø±: app/src/main/java/com/pronetwork/app/viewmodel/DashboardViewModel.kt

Ø§Ù„Ù…Ù‡Ø§Ù…:

Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ§Ù„Ø³Ø§Ø¨Ù‚

Ø¬Ù„Ø¨ Ø¢Ø®Ø± 5 Ø¹Ù…Ù„ÙŠØ§Øª

Ø¬Ù„Ø¨ Ø£Ø¹Ù„Ù‰ 5 Ø¹Ù…Ù„Ø§Ø¡ ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹ÙŠÙ†

Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©

1.3 ØªØ¹Ø¯ÙŠÙ„ MainActivity.kt
ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù…Ù† clients Ø¥Ù„Ù‰ dashboard

Ø¥Ø¶Ø§ÙØ© tab Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù€ Dashboard ÙÙŠ NavigationBar

Ø±Ø¨Ø· DashboardViewModel Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

1.4 Ø¥Ø¶Ø§ÙØ© Data Classes (Ø¬Ø¯ÙŠØ¯)

data class RecentTransaction(
    val clientName: String,
    val amount: Double,
    val type: String,     // Payment / Refund
    val time: String,
    val buildingName: String
)

data class UnpaidClientInfo(
    val clientId: Int,
    val clientName: String,
    val buildingName: String,
    val monthlyAmount: Double,
    val totalPaid: Double,
    val remaining: Double
)


1.5 Ø¥Ø¶Ø§ÙØ© String Resources
values/strings.xml + values-ar/strings.xml

Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØµÙˆØµ Ù„Ù„Ù€ Dashboard

Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
 Ø¥Ù†Ø´Ø§Ø¡ DashboardScreen.kt

 Ø¯Ù…Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Dashboard ÙÙŠ PaymentViewModel (Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† ViewModel Ù…Ù†ÙØµÙ„)

 Ø¥Ù†Ø´Ø§Ø¡ Data Classes (RecentTransaction, UnpaidClientInfo)

 ØªØ¹Ø¯ÙŠÙ„ MainActivity.kt (Ø¥Ø¶Ø§ÙØ© tab + Ø±Ø¨Ø· Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)

 Ø¥Ø¶Ø§ÙØ© Strings (Ø¹Ø±Ø¨ÙŠ + Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)

 Ø§Ø®ØªØ¨Ø§Ø± ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø©

Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø°ÙƒÙŠØ© + Ø§Ù„ÙØ±Ø² Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: Ø¹Ø§Ù„ÙŠØ© | Ø§Ù„Ø¬Ù‡Ø¯: Ù…Ù†Ø®ÙØ¶ | Ø§Ù„ØªØ£Ø«ÙŠØ±: Ø¹Ø§Ù„ÙŠ

Ø§Ù„Ù‡Ø¯Ù
ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø£Ù„ÙˆØ§Ù† Ø°ÙƒÙŠØ© + Ø®ÙŠØ§Ø±Ø§Øª ÙØ±Ø² ÙˆØ¹Ø±Ø¶ Ù…ØªÙ‚Ø¯Ù…Ø©.

Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
2.1 Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø°ÙƒÙŠØ© ÙÙŠ ClientListScreen.kt
Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ· Ù„ÙˆÙ†ÙŠ Ø¬Ø§Ù†Ø¨ÙŠ Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„:

ğŸŸ¢ Ø£Ø®Ø¶Ø±: Ù…Ø¯ÙÙˆØ¹ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ (PAID)

ğŸŸ  Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ: Ø¯ÙØ¹ Ø¬Ø²Ø¦ÙŠ (PARTIAL)

ğŸ”µ Ø£Ø²Ø±Ù‚: Ù…ÙØ³ÙˆÙÙ‘Ù‰ (SETTLED)

ğŸ”´ Ø£Ø­Ù…Ø±: ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹ (UNPAID)

Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø¨Ù†ÙØ³ Ù„ÙˆÙ† Ø§Ù„Ø­Ø§Ù„Ø©

2.2 Ù†Ø¸Ø§Ù… Ø§Ù„ÙØ±Ø² ÙˆØ§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¦Ù…Ø© Ø·Ø±Ù‚ Ø§Ù„Ø¹Ø±Ø¶:

Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹ (Ù…Ø¯ÙÙˆØ¹ / Ø¬Ø²Ø¦ÙŠ / Ù…ÙØ³ÙˆÙÙ‘Ù‰ / ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹)

Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³Ù… (Ø£Ø¨Ø¬Ø¯ÙŠ ØªØµØ§Ø¹Ø¯ÙŠ/ØªÙ†Ø§Ø²Ù„ÙŠ)

Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¨Ù†Ù‰

Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø§Ù‚Ø©

Ø­Ø³Ø¨ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (ØªØµØ§Ø¹Ø¯ÙŠ/ØªÙ†Ø§Ø²Ù„ÙŠ)

Ø­Ø³Ø¨ ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ø¯ÙØ¹Ø© (Ø§Ù„Ø£Ø­Ø¯Ø«/Ø§Ù„Ø£Ù‚Ø¯Ù…)

Ø­Ø³Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ØµÙŠÙ„ (Ø§Ù„Ø£Ù‚Ù„ Ø£ÙˆÙ„Ø§Ù‹)

ÙÙ„ØªØ± Ø°ÙƒÙŠ: Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØ£Ø®Ø±ÙŠÙ† ÙÙ‚Ø· (> Ø´Ù‡Ø±)

Ø¥Ø¶Ø§ÙØ© Ø²Ø± "View Options" ÙÙŠ TopAppBar ÙŠÙØªØ­ Ù…Ø±Ø¨Ø¹ Ø­ÙˆØ§Ø± Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¹Ø±Ø¶

2.3 Ø¥Ù†Ø´Ø§Ø¡ ViewOptionsDialog.kt
Ù…Ø±Ø¨Ø¹ Ø­ÙˆØ§Ø± ÙŠØ­ØªÙˆÙŠ RadioButtons Ù„ÙƒÙ„ Ø®ÙŠØ§Ø±

Ø­ÙØ¸ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± ÙÙŠ SharedPreferences

Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
 Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ù€ ClientListScreen

 Ø¥Ù†Ø´Ø§Ø¡ ViewOptionsDialog

 ØªØ¹Ø¯ÙŠÙ„ filterClients() ÙÙŠ MainActivity Ù„Ø¯Ø¹Ù… ÙƒÙ„ Ø·Ø±Ù‚ Ø§Ù„ÙØ±Ø²

 Ø¥Ø¶Ø§ÙØ© Strings

 Ø§Ø®ØªØ¨Ø§Ø±

Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØµØ¯ÙŠØ± + ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© + Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„
Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: Ø¹Ø§Ù„ÙŠØ© | Ø§Ù„Ø¬Ù‡Ø¯: Ù…ØªÙˆØ³Ø·-Ø¹Ø§Ù„ÙŠ | Ø§Ù„ØªØ£Ø«ÙŠØ±: Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹

Ø§Ù„Ù‡Ø¯Ù
ØªØ±Ù‚ÙŠØ© Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµØ¯ÙŠØ± ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ø­ØªØ±Ø§ÙÙŠ Ø¹Ø§Ù„Ù…ÙŠØŒ Ù…Ø¹ Ø¨Ù†Ø§Ø¡ Ù†Ø¸Ø§Ù… Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ù…ØªÙƒØ§Ù…Ù„
Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙŠØ¯Ø¹Ù… ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªØ³Ø±Ø¨ (Churn Analysis).

Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3 Ù…Ù‚Ø³Ù…Ø© Ø¥Ù„Ù‰ 5 Ø£Ø¬Ø²Ø§Ø¡

| Ø§Ù„Ø¬Ø²Ø¡ | Ø§Ù„ÙˆØµÙ                                           | Ø§Ù„Ø¬Ù‡Ø¯ | Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©        |
| ----- | ----------------------------------------------- | ----- | --------------- |
| 3.1   | Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ (Subscriber Lifecycle)         | Ø¹Ø§Ù„ÙŠ  | 1 - ÙŠÙÙ†ÙØ° Ø£ÙˆÙ„Ø§Ù‹ |
| 3.2   | ØªØ­Ø³ÙŠÙ† ØªÙ†Ø³ÙŠÙ‚ Excel (Freeze + Auto-Width)         | Ù…Ù†Ø®ÙØ¶ | 2               |
| 3.3   | QR Code ÙÙŠ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±                             | Ù…Ù†Ø®ÙØ¶ | 3               |
| 3.4   | ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø§Ù‚Ø© (Revenue by Package) | Ù…ØªÙˆØ³Ø· | 4               |
| 3.5   | ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„ÙØªØ±ÙŠØ© + ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ³Ø±Ø¨ (Churn)   | Ù…ØªÙˆØ³Ø· | 5               |

3.1 Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ (Subscriber Lifecycle) ğŸ”„
Ù„Ù…Ø§Ø°Ø§ ÙŠÙÙ†ÙØ° Ø£ÙˆÙ„Ø§Ù‹ØŸ Ù„Ø£Ù† ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ³Ø±Ø¨ (3.5) ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù…. Ø¨Ø¯ÙˆÙ†Ù‡ Ù„Ø§ Ù†Ù‚Ø¯Ø± Ù†ØªØªØ¨Ø¹ Ù…Ù† ÙÙØµÙ„ ÙˆÙ…Ù† Ø¹Ø§Ø¯.

Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ÙØµÙ„ Ø®Ø¯Ù…ØªÙ‡ØŒ Ù†ØºÙŠÙ‘Ø± Ø­Ø§Ù„ØªÙ‡ ÙÙ‚Ø·. Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ¨Ù‚Ù‰ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
Ù…Ø¹ ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ ÙˆØªØ§Ø±ÙŠØ®Ù‡ Ø§Ù„Ù…Ø§Ù„ÙŠØŒ Ù„ÙƒÙ† Ù„Ø§ ÙŠØ¸Ù‡Ø± ÙÙŠ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ ÙˆÙ„Ø§ ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ†.

Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø§Ù„Ø§Øª (3 Ø­Ø§Ù„Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©)

| Ø§Ù„Ø­Ø§Ù„Ø©       | Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© | Ø§Ù„ÙˆØµÙ                              | ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„ØªØ­ØµÙŠÙ„ØŸ | ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±ØŸ |
| ------------ | -------- | ---------------------------------- | ---------------- | ----------------- |
| ACTIVE       | ğŸŸ¢       | Ø¹Ù…ÙŠÙ„ Ù†Ø´Ø· - Ø§Ù„Ø®Ø¯Ù…Ø© ØªØ¹Ù…Ù„             | âœ… Ù†Ø¹Ù…            | âœ… Ù†Ø¹Ù…             |
| SUSPENDED    | ğŸŸ¡       | Ù…Ø¹Ù„Ù‘Ù‚ Ù…Ø¤Ù‚ØªØ§Ù‹ (Ø¹Ø¯Ù… Ø³Ø¯Ø§Ø¯ / Ø·Ù„Ø¨ Ø¹Ù…ÙŠÙ„) | âŒ Ù„Ø§             | âœ… Ù†Ø¹Ù…             |
| DISCONNECTED | ğŸ”´       | Ù…ÙØµÙˆÙ„ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ - Ø§Ù„Ø®Ø¯Ù…Ø© Ù…Ù†ØªÙ‡ÙŠØ©      | âŒ Ù„Ø§             | âœ… Ù†Ø¹Ù…             |

ACTIVE â”€â”€â”€â”€â”€â”€â†’ SUSPENDED        (ØªØ¹Ù„ÙŠÙ‚ Ù…Ø¤Ù‚Øª)
ACTIVE â”€â”€â”€â”€â”€â”€â†’ DISCONNECTED     (ÙØµÙ„ Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ø¨Ø§Ø´Ø±)
SUSPENDED â”€â”€â”€â†’ ACTIVE           (Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø¨Ø¹Ø¯ ØªØ¹Ù„ÙŠÙ‚)
SUSPENDED â”€â”€â”€â†’ DISCONNECTED     (ÙØµÙ„ Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ ØªØ¹Ù„ÙŠÙ‚)
DISCONNECTED â†’ ACTIVE           (Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø®Ø¯Ù…Ø© Ø¨Ø¹Ø¯ ÙØµÙ„)


3.1.1 ØªØ¹Ø¯ÙŠÙ„ Client.kt (Entity)
Ø¥Ø¶Ø§ÙØ© 3 Ø­Ù‚ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø¬Ø¯ÙˆÙ„ clients:

// === Ø­Ù‚ÙˆÙ„ Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ (Subscriber Lifecycle) ===
val status: String = "ACTIVE",            // ACTIVE / SUSPENDED / DISCONNECTED
val statusChangedDate: Long? = null,      // ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© (timestamp)
val disconnectReason: String = ""         // Ø³Ø¨Ø¨ Ø§Ù„ÙØµÙ„ Ø£Ùˆ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)


Migration Ù…Ø·Ù„ÙˆØ¨ ÙÙŠ ClientDatabase.kt:

val MIGRATION_X_Y = object : Migration(X, Y) {
    override fun migrate(db: SupportSQLiteDatabase) {
        db.execSQL("ALTER TABLE clients ADD COLUMN status TEXT NOT NULL DEFAULT 'ACTIVE'")
        db.execSQL("ALTER TABLE clients ADD COLUMN statusChangedDate INTEGER")
        db.execSQL("ALTER TABLE clients ADD COLUMN disconnectReason TEXT NOT NULL DEFAULT ''")
    }
}


3.1.2 ØªØ¹Ø¯ÙŠÙ„ ClientDao.kt
Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:

// === Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ ===

// Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ† ÙÙ‚Ø· (Ù„Ù„ØªØ­ØµÙŠÙ„ ÙˆØ§Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙŠÙˆÙ…ÙŠ)
@Query("SELECT * FROM clients WHERE status = 'ACTIVE' ORDER BY name ASC")
fun getActiveClients(): LiveData<List<Client>>

// Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø¹Ù„Ù‚ÙŠÙ† ÙÙ‚Ø·
@Query("SELECT * FROM clients WHERE status = 'SUSPENDED' ORDER BY name ASC")
fun getSuspendedClients(): LiveData<List<Client>>

// Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…ÙØµÙˆÙ„ÙŠÙ† ÙÙ‚Ø·
@Query("SELECT * FROM clients WHERE status = 'DISCONNECTED' ORDER BY statusChangedDate DESC")
fun getDisconnectedClients(): LiveData<List<Client>>

// Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø´Ø§Ù…Ù„ Ø§Ù„Ù…Ø¹Ù„Ù‚ÙŠÙ† ÙˆØ§Ù„Ù…ÙØµÙˆÙ„ÙŠÙ† (Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙÙ‚Ø·)
@Query("SELECT * FROM clients ORDER BY name ASC")
fun getAllClientsIncludingInactive(): LiveData<List<Client>>

// ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø¹Ù…ÙŠÙ„
@


#### 3.1.2 ØªØ¹Ø¯ÙŠÙ„ ClientDao.kt

Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:

```kotlin
// === Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ ===

// Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ† ÙÙ‚Ø· (Ù„Ù„ØªØ­ØµÙŠÙ„ ÙˆØ§Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙŠÙˆÙ…ÙŠ)
@Query("SELECT * FROM clients WHERE status = 'ACTIVE' ORDER BY name ASC")
fun getActiveClients(): LiveData<List<Client>>

// Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø¹Ù„Ù‚ÙŠÙ† ÙÙ‚Ø·
@Query("SELECT * FROM clients WHERE status = 'SUSPENDED' ORDER BY name ASC")
fun getSuspendedClients(): LiveData<List<Client>>

// Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…ÙØµÙˆÙ„ÙŠÙ† ÙÙ‚Ø·
@Query("SELECT * FROM clients WHERE status = 'DISCONNECTED' ORDER BY statusChangedDate DESC")
fun getDisconnectedClients(): LiveData<List<Client>>

// Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø´Ø§Ù…Ù„ Ø§Ù„Ù…Ø¹Ù„Ù‚ÙŠÙ† ÙˆØ§Ù„Ù…ÙØµÙˆÙ„ÙŠÙ† (Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙÙ‚Ø·)
@Query("SELECT * FROM clients ORDER BY name ASC")
fun getAllClientsIncludingInactive(): LiveData<List<Client>>

// ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø¹Ù…ÙŠÙ„
@Query("""
    UPDATE clients 
    SET status = :newStatus, 
        statusChangedDate = :date, 
        disconnectReason = :reason 
    WHERE id = :clientId
""")
suspend fun updateClientStatus(clientId: Int, newStatus: String, date: Long, reason: String)

// Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙØµÙˆÙ„ÙŠÙ† ÙÙŠ ÙØªØ±Ø© Ù…Ø¹ÙŠÙ†Ø© (Ù„ØªÙ‚Ø±ÙŠØ± Churn)
@Query("""
    SELECT COUNT(*) FROM clients 
    WHERE status = 'DISCONNECTED' 
    AND statusChangedDate BETWEEN :startMillis AND :endMillis
""")
suspend fun getDisconnectedCountInPeriod(startMillis: Long, endMillis: Long): Int

// Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙØ¹Ø§Ø¯ ØªÙØ¹ÙŠÙ„Ù‡Ù… ÙÙŠ ÙØªØ±Ø© Ù…Ø¹ÙŠÙ†Ø©
@Query("""
    SELECT COUNT(*) FROM clients 
    WHERE status = 'ACTIVE' 
    AND statusChangedDate BETWEEN :startMillis AND :endMillis
    AND disconnectReason != ''
""")
suspend fun getReactivatedCountInPeriod(startMillis: Long, endMillis: Long): Int

// Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø¯ ÙÙŠ Ø´Ù‡Ø± Ù…Ø¹ÙŠÙ†
@Query("""
    SELECT COUNT(*) FROM clients 
    WHERE startMonth = :month 
    AND status != 'DISCONNECTED'
""")
suspend fun getNewClientsInMonth(month: String): Int

// Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ† (Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª)
@Query("SELECT COUNT(*) FROM clients WHERE status = 'ACTIVE'")
suspend fun getActiveClientsCount(): Int

// Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙØµÙˆÙ„ÙŠÙ† ÙÙŠ ÙØªØ±Ø© (Ù„ØªÙØ§ØµÙŠÙ„ ØªÙ‚Ø±ÙŠØ± Churn)
@Query("""
    SELECT * FROM clients 
    WHERE status = 'DISCONNECTED' 
    AND statusChangedDate BETWEEN :startMillis AND :endMillis
    ORDER BY statusChangedDate DESC
""")
suspend fun getDisconnectedClientsInPeriod(startMillis: Long, endMillis: Long): List<Client>


3.1.3 ØªØ¹Ø¯ÙŠÙ„ ClientViewModel.kt
Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø©:

// === Ø¯ÙˆØ§Ù„ Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ ===

// ØªØ¹Ù„ÙŠÙ‚ Ø¹Ù…ÙŠÙ„ (ACTIVE â†’ SUSPENDED)
fun suspendClient(clientId: Int, reason: String = "") = viewModelScope.launch {
    clientDao.updateClientStatus(
        clientId = clientId,
        newStatus = "SUSPENDED",
        date = System.currentTimeMillis(),
        reason = reason
    )
}

// ÙØµÙ„ Ø¹Ù…ÙŠÙ„ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ (ACTIVE/SUSPENDED â†’ DISCONNECTED)
fun disconnectClient(clientId: Int, reason: String = "") = viewModelScope.launch {
    clientDao.updateClientStatus(
        clientId = clientId,
        newStatus = "DISCONNECTED",
        date = System.currentTimeMillis(),
        reason = reason
    )
}

// Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø¹Ù…ÙŠÙ„ (SUSPENDED/DISCONNECTED â†’ ACTIVE)
fun reactivateClient(clientId: Int) = viewModelScope.launch {
    clientDao.updateClientStatus(
        clientId = clientId,
        newStatus = "ACTIVE",
        date = System.currentTimeMillis(),
        reason = ""
    )
}


3.1.4 ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
ÙÙŠ ClientDetailsScreen.kt â€” Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø©":

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø©                           â”‚
â”‚                                         â”‚
â”‚  Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ğŸŸ¢ Ù†Ø´Ø·                  â”‚
â”‚                                         â”‚
â”‚  [ğŸŸ¡ ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø®Ø¯Ù…Ø©]  [ğŸ”´ ÙØµÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©]     â”‚
â”‚                                         â”‚
â”‚  * Ø¹Ù†Ø¯ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚/Ø§Ù„ÙØµÙ„ ÙŠØ¸Ù‡Ø± Ø­Ù‚Ù„:         â”‚
â”‚    "Ø³Ø¨Ø¨ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚/Ø§Ù„ÙØµÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø©                           â”‚
â”‚                                         â”‚
â”‚  Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ğŸ”´ Ù…ÙØµÙˆÙ„               â”‚
â”‚  ØªØ§Ø±ÙŠØ® Ø§Ù„ÙØµÙ„: 2026-02-15               â”‚
â”‚  Ø§Ù„Ø³Ø¨Ø¨: Ø¹Ø¯Ù… Ø§Ù„Ø³Ø¯Ø§Ø¯ Ù„Ù…Ø¯Ø© 3 Ø£Ø´Ù‡Ø±         â”‚
â”‚                                         â”‚
â”‚  [ğŸŸ¢ Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Ø²Ø± "ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø®Ø¯Ù…Ø©" ğŸŸ¡ â†’ ÙŠØ¸Ù‡Ø± AlertDialog ØªØ£ÙƒÙŠØ¯ + Ø­Ù‚Ù„ Ø³Ø¨Ø¨ Ø§Ø®ØªÙŠØ§Ø±ÙŠ

Ø²Ø± "ÙØµÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©" ğŸ”´ â†’ ÙŠØ¸Ù‡Ø± AlertDialog ØªØ£ÙƒÙŠØ¯ Ù‚ÙˆÙŠ + Ø­Ù‚Ù„ Ø³Ø¨Ø¨ Ø§Ø®ØªÙŠØ§Ø±ÙŠ

Ø²Ø± "Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„" ğŸŸ¢ â†’ ÙŠØ¸Ù‡Ø± AlertDialog ØªØ£ÙƒÙŠØ¯ Ø¨Ø³ÙŠØ·

ÙÙŠ ClientListScreen.kt â€” Ø¥Ø¶Ø§ÙØ© ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙÙ„ØªØ±Ø© Ø§Ù„Ø­Ø§Ù„Ø©:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Ù†Ø´Ø· âœ“]  [Ù…Ø¹Ù„Ù‘Ù‚]  [Ù…ÙØµÙˆÙ„]  [Ø§Ù„ÙƒÙ„]     â”‚
â”‚                                          â”‚
â”‚  (Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ = Ù†Ø´Ø· ÙÙ‚Ø·)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Ø¥Ø¶Ø§ÙØ© FilterChip Ø£Ùˆ Tab row ÙÙˆÙ‚ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡

Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ ÙŠØ¹Ø±Ø¶ Ø§Ù„Ù†Ø´Ø·ÙŠÙ† ÙÙ‚Ø·

Ø§Ø®ØªÙŠØ§Ø± "Ù…Ø¹Ù„Ù‘Ù‚" ÙŠØ¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ù„Ù‚ÙŠÙ† Ù…Ø¹ Ø£ÙŠÙ‚ÙˆÙ†Ø© ğŸŸ¡

Ø§Ø®ØªÙŠØ§Ø± "Ù…ÙØµÙˆÙ„" ÙŠØ¹Ø±Ø¶ Ø§Ù„Ù…ÙØµÙˆÙ„ÙŠÙ† Ù…Ø¹ Ø£ÙŠÙ‚ÙˆÙ†Ø© ğŸ”´ ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„ÙØµÙ„

Ø§Ø®ØªÙŠØ§Ø± "Ø§Ù„ÙƒÙ„" ÙŠØ¹Ø±Ø¶ Ø§Ù„Ø¬Ù…ÙŠØ¹ Ù…Ø¹ Ø´Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø©

ÙÙŠ filterClients() Ø¨Ù€ MainActivity.kt:

ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙÙ„ØªØ± Ù„ÙŠØ³ØªØ«Ù†ÙŠ SUSPENDED Ùˆ DISCONNECTED Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹

Ø¥Ø¶Ø§ÙØ© parameter statusFilter: String = "ACTIVE" Ù„Ù„ØªØ­ÙƒÙ…

3.1.5 ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ SUSPENDED Ùˆ DISCONNECTED Ù„Ø§ ÙŠÙØ­Ø³Ø¨ÙˆÙ† ÙÙŠ:

Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ (KPI cards)

Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©

Ø¨Ø·Ø§Ù‚Ø§Øª Dashboard

Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ

Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ†

Ù„ÙƒÙ† ÙŠØ¸Ù‡Ø±ÙˆÙ† ÙÙŠ:

Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© (Ù…Ø¹ Ø¹Ù„Ø§Ù…Ø© Ø­Ø§Ù„ØªÙ‡Ù…)

ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ³Ø±Ø¨ (Churn Report) â€” Ø§Ù„Ù‚Ø³Ù… 3.5

Ø´Ø§Ø´Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± ÙÙ„ØªØ± "Ù…Ø¹Ù„Ù‘Ù‚" Ø£Ùˆ "Ù…ÙØµÙˆÙ„" Ø£Ùˆ "Ø§Ù„ÙƒÙ„"

Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù… 3.1
 Ø¥Ø¶Ø§ÙØ© 3 Ø­Ù‚ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Client.kt (status, statusChangedDate, disconnectReason)

 Ø¥Ù†Ø´Ø§Ø¡ Migration ÙÙŠ ClientDatabase.kt

 Ø¥Ø¶Ø§ÙØ© Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ ClientDao.kt

 Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ ClientViewModel.kt

 Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø©" ÙÙŠ ClientDetailsScreen.kt

 Ø¥Ø¶Ø§ÙØ© ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙÙ„ØªØ±Ø© Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ ClientListScreen.kt

 ØªØ¹Ø¯ÙŠÙ„ filterClients() ÙÙŠ MainActivity.kt

 ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ù„Ù‚ÙŠÙ† ÙˆØ§Ù„Ù…ÙØµÙˆÙ„ÙŠÙ†

 Ø¥Ø¶Ø§ÙØ© Strings (Ø¹Ø±Ø¨ÙŠ + Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)

 Ø§Ø®ØªØ¨Ø§Ø± ÙƒÙ„ Ø§Ù„ØªØ­ÙˆÙ„Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø­Ø§Ù„Ø§Øª

3.2 ØªØ­Ø³ÙŠÙ† ØªÙ†Ø³ÙŠÙ‚ Excel ğŸ“Š
3.2.1 ØªØ¬Ù…ÙŠØ¯ Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ (Freeze Panes)
ÙÙŠ buildExcelXml() Ø¯Ø§Ø®Ù„ PaymentsExportManager.kt:

Ø¥Ø¶Ø§ÙØ© ÙƒØªÙ„Ø© WorksheetOptions Ù‚Ø¨Ù„ Ø¥ØºÙ„Ø§Ù‚ </Worksheet> ÙÙŠ ÙƒÙ„ Ø´ÙŠØª:

<WorksheetOptions xmlns="urn:schemas-microsoft-com:office:excel">
  <FreezePanes/>
  <FrozenNoSplit/>
  <SplitHorizontal>1</SplitHorizontal>
  <TopRowBottomPane>1</TopRowBottomPane>
  <ActivePane>2</ActivePane>
</WorksheetOptions>


ÙŠÙØ·Ø¨Ù‚ Ø¹Ù„Ù‰ 3 Ø´ÙŠØªØ§Øª: Dashboard, Client Details, Transactions

3.2.2 Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Auto-Width)
Ø¥Ø¶Ø§ÙØ© ØªØ¹Ø±ÙŠÙ Ø£Ø¹Ù…Ø¯Ø© Ø¨Ø¹Ø¯ <Table> ÙˆÙ‚Ø¨Ù„ Ø£ÙˆÙ„ <Row>:

Ø´ÙŠØª Client Details:

<Column ss:AutoFitWidth="1" ss:Width="120"/>  <!-- Client Name -->
<Column ss:AutoFitWidth="1" ss:Width="80"/>   <!-- Sub# -->
<Column ss:AutoFitWidth="1" ss:Width="100"/>  <!-- Building -->
<Column ss:AutoFitWidth="1" ss:Width="50"/>   <!-- Room -->
<Column ss:AutoFitWidth="1" ss:Width="70"/>   <!-- Package -->
<Column ss:AutoFitWidth="1" ss:Width="80"/>   <!-- Amount -->
<Column ss:AutoFitWidth="1" ss:Width="80"/>   <!-- Paid -->
<Column ss:AutoFitWidth="1" ss:Width="80"/>   <!-- Remaining -->
<Column ss:AutoFitWidth="1" ss:Width="70"/>   <!-- Status -->
<Column ss:AutoFitWidth="1" ss:Width="100"/>  <!-- Last Payment -->
<Column ss:AutoFitWidth="1" ss:Width="150"/>  <!-- Notes -->


Ø´ÙŠØª Transactions:

<Column ss:AutoFitWidth="1" ss:Width="70"/>   <!-- Month -->
<Column ss:AutoFitWidth="1" ss:Width="110"/>  <!-- Client -->
<Column ss:AutoFitWidth="1" ss:Width="70"/>   <!-- Sub# -->
<Column ss:AutoFitWidth="1" ss:Width="100"/>  <!-- Building -->
<Column ss:AutoFitWidth="1" ss:Width="50"/>   <!-- Room -->
<Column ss:AutoFitWidth="1" ss:Width="120"/>  <!-- Date -->
<Column ss:AutoFitWidth="1" ss:Width="80"/>   <!-- Amount -->
<Column ss:AutoFitWidth="1" ss:Width="80"/>   <!-- Type -->
<Column ss:AutoFitWidth="1" ss:Width="150"/>  <!-- Notes -->


Ù†ÙØ³ Ø§Ù„Ø´ÙŠØ¡ ÙŠÙØ·Ø¨Ù‚ Ø¹Ù„Ù‰ DailyCollectionExportManager.kt

Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù… 3.2
 Ø¥Ø¶Ø§ÙØ© FrozenRows Ù„Ø´ÙŠØª Dashboard ÙÙŠ PaymentsExportManager

 Ø¥Ø¶Ø§ÙØ© FrozenRows Ù„Ø´ÙŠØª Client Details

 Ø¥Ø¶Ø§ÙØ© FrozenRows Ù„Ø´ÙŠØª Transactions

 Ø¥Ø¶Ø§ÙØ© FrozenRows ÙÙŠ DailyCollectionExportManager

 Ø¥Ø¶Ø§ÙØ© Column widths Ù„ÙƒÙ„ Ø§Ù„Ø´ÙŠØªØ§Øª ÙÙŠ PaymentsExportManager

 Ø¥Ø¶Ø§ÙØ© Column widths ÙÙŠ DailyCollectionExportManager

 Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙØªØ­ ÙÙŠ Microsoft Excel

 Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙØªØ­ ÙÙŠ Google Sheets

3.3 QR Code ÙÙŠ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ğŸ“±
Ø§Ù„Ù‡Ø¯Ù
Ø¥Ø¶Ø§ÙØ© QR Code ÙÙŠ ÙƒÙ„ ØªÙ‚Ø±ÙŠØ± (PDF + Excel) ÙŠØ­ØªÙˆÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù„Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø³Ø±ÙŠØ¹.

Ù…Ø­ØªÙˆÙ‰ QR Code

ProNetwork Report
Title: Monthly Report: 2026-02
Generated: 2026-02-18 14:30
Collection Rate: 85.5%
Total: 45,000 SAR
Report ID: A3F8B2C1


3.3.1 Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© ZXing
ÙÙŠ build.gradle.kts (Module: app):

dependencies {
    implementation("com.google.zxing:core:3.5.3")
}


#### 3.3.2 Ø¥Ù†Ø´Ø§Ø¡ QrCodeGenerator.kt (Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯)

**Ø§Ù„Ù…Ø³Ø§Ø±**: `app/src/main/java/com/pronetwork/app/utils/QrCodeGenerator.kt`

```kotlin
package com.pronetwork.app.utils

import android.graphics.Bitmap
import android.graphics.Color
import com.google.zxing.BarcodeFormat
import com.google.zxing.EncodeHintType
import com.google.zxing.qrcode.QRCodeWriter
import java.util.UUID

object QrCodeGenerator {

    fun generateBitmap(content: String, size: Int = 200): Bitmap {
        val writer = QRCodeWriter()
        val hints = mapOf(EncodeHintType.MARGIN to 1)
        val bitMatrix = writer.encode(content, BarcodeFormat.QR_CODE, size, size, hints)
        val bitmap = Bitmap.createBitmap(size, size, Bitmap.Config.RGB_565)
        for (x in 0 until size) {
            for (y in 0 until size) {
                bitmap.setPixel(x, y, if (bitMatrix[x, y]) Color.BLACK else Color.WHITE)
            }
        }
        return bitmap
    }

    fun buildReportContent(
        reportTitle: String,
        generatedDate: String,
        collectionRate: Double,
        totalCollected: Double
    ): String {
        val reportId = UUID.randomUUID().toString().take(8).uppercase()
        return buildString {
            appendLine("ProNetwork Report")
            appendLine("Title: $reportTitle")
            appendLine("Date: $generatedDate")
            appendLine("Rate: ${"%.1f".format(collectionRate)}%")
            appendLine("Total: ${"%.2f".format(totalCollected)} SAR")
            appendLine("ID: $reportId")
        }
    }
}



3.3.3 ØªØ¹Ø¯ÙŠÙ„ PDF Builder
ÙÙŠ buildPdf() Ø¯Ø§Ø®Ù„ PaymentsExportManager.kt:

Ø¨Ø¹Ø¯ Ø±Ø³Ù… Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ø¥Ø¶Ø§ÙØ© QR Code ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰:

// === QR Code ===
val qrContent = QrCodeGenerator.buildReportContent(
    reportTitle = data.reportTitle,
    generatedDate = data.generatedDate,
    collectionRate = data.grandCollectionRate,
    totalCollected = data.grandTotalCollected
)
val qrBitmap = QrCodeGenerator.generateBitmap(qrContent, 100)
canvas.drawBitmap(qrBitmap, pageWidth - margin - 100f, 15f, null)


3.3.4 ØªØ¹Ø¯ÙŠÙ„ Excel Builder
ÙÙŠ buildExcelXml() Ø¯Ø§Ø®Ù„ PaymentsExportManager.kt:

Ø¥Ø¶Ø§ÙØ© Ø³Ø·Ø± ÙŠØ­ØªÙˆÙŠ Ø±Ø§Ø¨Ø· QR Ù…Ø´ÙØ± Ø¨Ø¹Ø¯ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙ‚Ø±ÙŠØ±:

<Row>
  <Cell ss:StyleID="SubTitle">
    <Data ss:Type="String">Report ID: [UUID] | Verify at: pronetwork.app/verify/[UUID]</Data>
  </Cell>
</Row>


3.3.5 ØªØ·Ø¨ÙŠÙ‚ Ù†ÙØ³ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¹Ù„Ù‰ DailyCollectionExportManager.kt
Ù†ÙØ³ QR Code ÙÙŠ PDF Ø§Ù„ÙŠÙˆÙ…ÙŠ

Ù†ÙØ³ Ø³Ø·Ø± Report ID ÙÙŠ Excel Ø§Ù„ÙŠÙˆÙ…ÙŠ

Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù… 3.3
 Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© ZXing ÙÙŠ build.gradle.kts

 Ø¥Ù†Ø´Ø§Ø¡ QrCodeGenerator.kt

 Ø¥Ø¶Ø§ÙØ© QR Code ÙÙŠ PDF Ø¯Ø§Ø®Ù„ PaymentsExportManager

 Ø¥Ø¶Ø§ÙØ© Report ID ÙÙŠ Excel Ø¯Ø§Ø®Ù„ PaymentsExportManager

 Ø¥Ø¶Ø§ÙØ© QR Code ÙÙŠ PDF Ø¯Ø§Ø®Ù„ DailyCollectionExportManager

 Ø¥Ø¶Ø§ÙØ© Report ID ÙÙŠ Excel Ø¯Ø§Ø®Ù„ DailyCollectionExportManager

 Ø§Ø®ØªØ¨Ø§Ø± Ù‚Ø±Ø§Ø¡Ø© QR Code Ø¨Ø§Ù„Ø¬ÙˆØ§Ù„

3.4 ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø§Ù‚Ø© (Revenue by Package) ğŸ“¦
Ø§Ù„Ù‡Ø¯Ù
Ø´ÙŠØª Ø¬Ø¯ÙŠØ¯ ÙÙŠ ØªÙ‚Ø§Ø±ÙŠØ± Excel + Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯ ÙÙŠ PDF ÙŠØ¹Ø±Ø¶ Ø£Ø¯Ø§Ø¡ ÙƒÙ„ Ø¨Ø§Ù‚Ø© Ø¥Ù†ØªØ±Ù†Øª Ø¨Ø´ÙƒÙ„ Ù…Ù†ÙØµÙ„.

Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙƒÙ„ Ø¨Ø§Ù‚Ø©

| Ø§Ù„Ø­Ù‚Ù„               | Ø§Ù„ÙˆØµÙ                       |
| ------------------- | --------------------------- |
| Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©          | Ù…Ø«Ù„: 5Mbps, 10Mbps, 20Mbps  |
| Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡         | ÙƒÙ… Ø¹Ù…ÙŠÙ„ Ù…Ø´ØªØ±Ùƒ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø§Ù‚Ø© |
| Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹     | Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ã— Ø³Ø¹Ø± Ø§Ù„Ø¨Ø§Ù‚Ø©    |
| Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ø­ØµÙ‘Ù„     | Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…Ø¯ÙÙˆØ¹ ÙØ¹Ù„ÙŠØ§Ù‹        |
| Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ             | Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ - Ø§Ù„Ù…Ø­ØµÙ‘Ù„           |
| Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ØµÙŠÙ„        | (Ø§Ù„Ù…Ø­ØµÙ‘Ù„ / Ø§Ù„Ù…ØªÙˆÙ‚Ø¹) Ã— 100   |
| Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ | PAID count                  |
| Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ø²Ø¦ÙŠ          | PARTIAL count               |
| Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙØ³ÙˆÙÙ‘Ù‰       | SETTLED count               |
| Ø¹Ø¯Ø¯ ØºÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹     | UNPAID count                |

3.4.1 Ø¥Ø¶Ø§ÙØ© Data Model
ÙÙŠ PaymentsExportManager.kt â€” Ø¥Ø¶Ø§ÙØ© data class Ø¬Ø¯ÙŠØ¯:

data class PackageRevenueSummary(
    val packageName: String,
    val clientCount: Int,
    val totalExpected: Double,
    val totalCollected: Double,
    val totalRemaining: Double,
    val collectionRate: Double,
    val paidCount: Int,
    val partialCount: Int,
    val settledCount: Int,
    val unpaidCount: Int
)


3.4.2 Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ù„Ø© Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
ÙÙŠ PaymentsExportManager.kt â€” Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ù„Ø© Ø¨Ø¹Ø¯ gatherMonthData():

private fun gatherPackageRevenue(monthsData: List<MonthData>): List<PackageRevenueSummary> {
    val allClients = monthsData.flatMap { it.clients }
    return allClients.groupBy { it.packageType }.map { (pkg, clients) ->
        val expected = clients.sumOf { it.monthlyAmount }
        val collected = clients.sumOf { it.totalPaid }
        val remaining = (expected - collected).coerceAtLeast(0.0)
        val rate = if (expected > 0) (collected / expected) * 100 else 0.0
        PackageRevenueSummary(
            packageName = pkg,
            clientCount = clients.size,
            totalExpected = expected,
            totalCollected = collected,
            totalRemaining = remaining,
            collectionRate = rate,
            paidCount = clients.count { it.status == "PAID" },
            partialCount = clients.count { it.status == "PARTIAL" },
            settledCount = clients.count { it.status == "SETTLED" },
            unpaidCount = clients.count { it.status == "UNPAID" }
        )
    }.sortedByDescending { it.totalCollected }
}


3.4.3 Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø°ÙƒÙŠØ©

private fun generatePackageInsights(packages: List<PackageRevenueSummary>): List<SmartInsight> {
    val insights = mutableListOf<SmartInsight>()
    
    // Ø£Ø¶Ø¹Ù Ø¨Ø§Ù‚Ø© ØªØ­ØµÙŠÙ„Ø§Ù‹
    val weakest = packages.minByOrNull { it.collectionRate }
    if (weakest != null && weakest.collectionRate < 70) {
        insights.add(SmartInsight(
            "âš ï¸", "WARNING",
            "Weak Package: ${weakest.packageName}",
            "Collection rate only ${"%.1f".format(weakest.collectionRate)}% â€” ${weakest.unpaidCount} unpaid clients"
        ))
    }
    
    // Ø£Ù‚ÙˆÙ‰ Ø¨Ø§Ù‚Ø© ØªØ­ØµÙŠÙ„Ø§Ù‹
    val strongest = packages.maxByOrNull { it.collectionRate }
    if (strongest != null && strongest.collectionRate >= 90) {
        insights.add(SmartInsight(
            "ğŸ†", "SUCCESS",
            "Top Package: ${strongest.packageName}",
            "Excellent collection at ${"%.1f".format(strongest.collectionRate)}%"
        ))
    }
    
    // Ø¨Ø§Ù‚Ø© ÙÙŠÙ‡Ø§ Ø£ÙƒØ«Ø± Ø¹Ù…Ù„Ø§Ø¡ ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹ÙŠÙ†
    val mostUnpaid = packages.maxByOrNull { it.unpaidCount }
    if (mostUnpaid != null && mostUnpaid.unpaidCount > 0) {
        insights.add(SmartInsight(
            "ğŸ”´", "CRITICAL",
            "${mostUnpaid.unpaidCount} Unpaid in ${mostUnpaid.packageName}",
            "Highest unpaid count â€” follow up immediately"
        ))
    }
    
    return insights
}


3.4.4 ØªØ¹Ø¯ÙŠÙ„ Excel Builder â€” Ø¥Ø¶Ø§ÙØ© Ø´ÙŠØª "Revenue by Package"
ÙÙŠ buildExcelXml() â€” Ø¥Ø¶Ø§ÙØ© Ø´ÙŠØª Ø¬Ø¯ÙŠØ¯ Ø¨Ø¹Ø¯ Ø´ÙŠØª Dashboard:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Revenue by Package â€” 2026-02                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Package  â”‚Clients â”‚ Expected â”‚Collected â”‚Remaining â”‚  Rate  â”‚ Status â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 20Mbps   â”‚   45   â”‚ 6,750    â”‚ 6,200    â”‚   550    â”‚ 91.9%  â”‚ ğŸŸ¢    â”‚
â”‚ 10Mbps   â”‚   30   â”‚ 3,000    â”‚ 2,400    â”‚   600    â”‚ 80.0%  â”‚ ğŸŸ¢    â”‚
â”‚ 5Mbps    â”‚   25   â”‚ 1,250    â”‚   800    â”‚   450    â”‚ 64.0%  â”‚ ğŸŸ¡    â”‚
â”‚ 50Mbps   â”‚   10   â”‚ 2,000    â”‚   900    â”‚ 1,100    â”‚ 45.0%  â”‚ ğŸ”´    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL    â”‚  110   â”‚ 13,000   â”‚ 10,300   â”‚ 2,700    â”‚ 79.2%  â”‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš ï¸ Weak Package: 50Mbps â€” Rate only 45.0%, 4 unpaid clients         â”‚
â”‚ ğŸ† Top Package: 20Mbps â€” Excellent collection at 91.9%              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


3.4.5 ØªØ¹Ø¯ÙŠÙ„ PDF Builder â€” Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… "Revenue by Package"
Ø¨Ø¹Ø¯ Ù‚Ø³Ù… "Collection by Building" ÙÙŠ buildPdf():

Ø¬Ø¯ÙˆÙ„ Ø¨Ù†ÙØ³ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø£Ø¹Ù„Ø§Ù‡

Ø£Ù„ÙˆØ§Ù† Ø­Ø³Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ØµÙŠÙ„ (Ø£Ø®Ø¶Ø± â‰¥80% / Ø£ØµÙØ± â‰¥50% / Ø£Ø­Ù…Ø± <50%)

Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø°ÙƒÙŠØ© Ø£Ø³ÙÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„

Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù… 3.4
 Ø¥Ø¶Ø§ÙØ© PackageRevenueSummary data class

 Ø¥Ø¶Ø§ÙØ© gatherPackageRevenue() function

 Ø¥Ø¶Ø§ÙØ© generatePackageInsights() function

 Ø¥Ø¶Ø§ÙØ© Ø´ÙŠØª "Revenue by Package" ÙÙŠ Excel builder

 Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… "Revenue by Package" ÙÙŠ PDF builder

 Ø¥Ø¶Ø§ÙØ© Ù†ÙØ³ Ø§Ù„Ù‚Ø³Ù… ÙÙŠ DailyCollectionExportManager (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)

 Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹ Ø¨Ø§Ù‚Ø§Øª Ù…Ø®ØªÙ„ÙØ©

3.5 ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„ÙØªØ±ÙŠØ© + ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ³Ø±Ø¨ (Period Comparison + Churn) ğŸ“ˆ
Ø§Ù„Ù‡Ø¯Ù
Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø§Ø±Ù†Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„ÙØªØ±Ø§Øª + ØªÙ‚Ø±ÙŠØ± ØªØ³Ø±Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.

3.5.1 Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„ÙØªØ±ÙŠØ© (Period Comparison)
3 Ø£Ù†ÙˆØ§Ø¹ Ù…Ù‚Ø§Ø±Ù†Ø© Ø¬Ø¯ÙŠØ¯Ø©:

| Ù†ÙˆØ¹ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©                         | Ø§Ù„Ù…Ø«Ø§Ù„                     | Ø§Ù„ÙˆØµÙ          |
| ------------------------------------ | -------------------------- | -------------- |
| Ø´Ù‡Ø± vs Ø´Ù‡Ø± Ø³Ø§Ø¨Ù‚                      | ÙØ¨Ø±Ø§ÙŠØ± 2026 vs ÙŠÙ†Ø§ÙŠØ± 2026  | Ù…ÙˆØ¬ÙˆØ¯ Ø­Ø§Ù„ÙŠØ§Ù‹ âœ… |
| Ø´Ù‡Ø± vs Ù†ÙØ³ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…Ø§Ø¶ÙŠØ© (YoY) | ÙØ¨Ø±Ø§ÙŠØ± 2026 vs ÙØ¨Ø±Ø§ÙŠØ± 2025 | Ø¬Ø¯ÙŠØ¯           |
| Ø±Ø¨Ø¹ vs Ø±Ø¨Ø¹ Ø³Ø§Ø¨Ù‚ (QoQ)                | Q1-2026 vs Q4-2025         | Ø¬Ø¯ÙŠØ¯           |


Ø¥Ø¶Ø§ÙØ© Data Model:

data class PeriodComparison(
    val currentPeriodLabel: String,     // "2026-02" Ø£Ùˆ "Q1-2026"
    val previousPeriodLabel: String,    // "2025-02" Ø£Ùˆ "Q4-2025"
    val currentCollected: Double,
    val previousCollected: Double,
    val currentRate: Double,
    val previousRate: Double,
    val currentClients: Int,
    val previousClients: Int,
    val revenueGrowth: Double,          // Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ù…Ùˆ ÙÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ (%)
    val rateChange: Double,             // Ø§Ù„ØªØºÙŠØ± ÙÙŠ Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­ØµÙŠÙ„ (%)
    val clientGrowth: Double,           // Ù†Ø³Ø¨Ø© Ù†Ù…Ùˆ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (%)
    val comparisonType: String          // "MoM" / "YoY" / "QoQ"
)


**Ø¯Ø§Ù„Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©:**

```kotlin
private fun calculateComparison(
    currentMonth: MonthData,
    previousMonth: MonthData,
    type: String
): PeriodComparison {
    val revenueGrowth = if (previousMonth.totalCollected > 0)
        ((currentMonth.totalCollected - previousMonth.totalCollected) / previousMonth.totalCollected) * 100
    else 0.0

    val rateChange = currentMonth.collectionRate - previousMonth.collectionRate

    val clientGrowth = if (previousMonth.totalClients > 0)
        ((currentMonth.totalClients - previousMonth.totalClients).toDouble() / previousMonth.totalClients) * 100
    else 0.0

    return PeriodComparison(
        currentPeriodLabel = currentMonth.month,
        previousPeriodLabel = previousMonth.month,
        currentCollected = currentMonth.totalCollected,
        previousCollected = previousMonth.totalCollected,
        currentRate = currentMonth.collectionRate,
        previousRate = previousMonth.collectionRate,
        currentClients = currentMonth.totalClients,
        previousClients = previousMonth.totalClients,
        revenueGrowth = revenueGrowth,
        rateChange = rateChange,
        clientGrowth = clientGrowth,
        comparisonType = type
    )
}


Ø¯Ø§Ù„Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„ Ù…Ù† Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…Ø§Ø¶ÙŠØ© (YoY):

private fun getYearAgoMonth(month: String): String {
    val parts = month.split("-")
    val year = parts.toInt() - 1
    return String.format("%04d-%s", year, parts)[1]
}


Ø¯Ø§Ù„Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø¨Ø¹:

private fun getQuarterMonths(month: String): List<String> {
    val parts = month.split("-")
    val year = parts.toInt()
    val m = parts.toInt()[1]
    val quarterStart = when (m) {
        in 1..3 -> 1
        in 4..6 -> 4
        in 7..9 -> 7
        else -> 10
    }
    return (0..2).map { String.format("%04d-%02d", year, quarterStart + it) }
}

private fun getPreviousQuarterMonths(month: String): List<String> {
    val parts = month.split("-")
    val year = parts.toInt()
    val m = parts.toInt()[1]
    val quarterStart = when (m) {
        in 1..3 -> 10  // Q4 Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…Ø§Ø¶ÙŠØ©
        in 4..6 -> 1
        in 7..9 -> 4
        else -> 7
    }
    val qYear = if (m in 1..3) year - 1 else year
    return (0..2).map { String.format("%04d-%02d", qYear, quarterStart + it) }
}


Ø´ÙƒÙ„ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© ÙÙŠ Ø§Ù„ØªÙ‚Ø±ÙŠØ± (Excel + PDF):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Period Comparison                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Metric          â”‚ Current      â”‚ Previous     â”‚ Change      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Period          â”‚ 2026-02      â”‚ 2025-02      â”‚ YoY         â”‚
â”‚ Collected       â”‚ 45,000 SAR   â”‚ 38,000 SAR   â”‚ ğŸ“ˆ +18.4%  â”‚
â”‚ Collection Rate â”‚ 85.5%        â”‚ 78.2%        â”‚ ğŸ“ˆ +7.3%   â”‚
â”‚ Active Clients  â”‚ 110          â”‚ 95           â”‚ ğŸ“ˆ +15.8%  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Period          â”‚ Q1-2026      â”‚ Q4-2025      â”‚ QoQ         â”‚
â”‚ Collected       â”‚ 130,000 SAR  â”‚ 125,000 SAR  â”‚ ğŸ“ˆ +4.0%   â”‚
â”‚ Collection Rate â”‚ 83.2%        â”‚ 81.0%        â”‚ ğŸ“ˆ +2.2%   â”‚
â”‚ Active Clients  â”‚ 110          â”‚ 105          â”‚ ğŸ“ˆ +4.8%   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ˆ = Ø£Ø®Ø¶Ø± (Ù†Ù…Ùˆ)    ğŸ“‰ = Ø£Ø­Ù…Ø± (Ø§Ù†Ø®ÙØ§Ø¶)    â¡ï¸ = Ø±Ù…Ø§Ø¯ÙŠ (Ø«Ø¨Ø§Øª)


3.5.2 ØªÙ‚Ø±ÙŠØ± ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ³Ø±Ø¨ (Churn Analysis)
ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰: Ø§Ù„Ù‚Ø³Ù… 3.1 (Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„) â€” ÙŠØ¬Ø¨ ØªÙ†ÙÙŠØ° 3.1 Ø£ÙˆÙ„Ø§Ù‹



Data Model:


data class ChurnReport(
    val periodLabel: String,           // "2026-02"
    val activeClientsStart: Int,       // Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø´Ø·ÙŠÙ† Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙØªØ±Ø©
    val activeClientsEnd: Int,         // Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø´Ø·ÙŠÙ† Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙØªØ±Ø©
    val newClients: Int,               // Ø¹Ù…Ù„Ø§Ø¡ Ø¬Ø¯Ø¯ Ø®Ù„Ø§Ù„ Ø§Ù„ÙØªØ±Ø©
    val disconnectedClients: Int,      // Ø¹Ù…Ù„Ø§Ø¡ ØªÙ… ÙØµÙ„Ù‡Ù… Ø®Ù„Ø§Ù„ Ø§Ù„ÙØªØ±Ø©
    val suspendedClients: Int,         // Ø¹Ù…Ù„Ø§Ø¡ ØªÙ… ØªØ¹Ù„ÙŠÙ‚Ù‡Ù… Ø®Ù„Ø§Ù„ Ø§Ù„ÙØªØ±Ø©
    val reactivatedClients: Int,       // Ø¹Ù…Ù„Ø§Ø¡ Ø£ÙØ¹ÙŠØ¯ ØªÙØ¹ÙŠÙ„Ù‡Ù… Ø®Ù„Ø§Ù„ Ø§Ù„ÙØªØ±Ø©
    val netGrowth: Int,                // ØµØ§ÙÙŠ Ø§Ù„Ù†Ù…Ùˆ = Ø¬Ø¯Ø¯ - Ù…ÙØµÙˆÙ„ÙŠÙ†
    val churnRate: Double,             // Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ³Ø±Ø¨ (%) = Ù…ÙØµÙˆÙ„ÙŠÙ† / Ù†Ø´Ø·ÙŠÙ† Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙØªØ±Ø©
    val growthRate: Double,            // Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ù…Ùˆ (%) = Ø¬Ø¯Ø¯ / Ù†Ø´Ø·ÙŠÙ† Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙØªØ±Ø©
    val disconnectedDetails: List<ChurnClientDetail>  // ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙØµÙˆÙ„ÙŠÙ†
)

data class ChurnClientDetail(
    val clientName: String,
    val subscriptionNumber: String,
    val buildingName: String,
    val packageType: String,
    val disconnectDate: String,
    val reason: String,
    val totalRevenue: Double           // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø§ Ø¯ÙØ¹Ù‡ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø®Ù„Ø§Ù„ Ø­ÙŠØ§ØªÙ‡
)


Ø´ÙƒÙ„ ØªÙ‚Ø±ÙŠØ± Churn ÙÙŠ Ø§Ù„ØªÙ‚Ø±ÙŠØ± (Excel + PDF):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Churn Analysis â€” 2026-02                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Active (Start of Month) â”‚ 105                               â”‚
â”‚ + New Clients           â”‚ +8                                â”‚
â”‚ + Reactivated           â”‚ +2                                â”‚
â”‚ - Suspended             â”‚ -3                                â”‚
â”‚ - Disconnected          â”‚ -2                                â”‚
â”‚ = Active (End of Month) â”‚ 110                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Net Growth              â”‚ +5 (ğŸ“ˆ +4.8%)                     â”‚
â”‚ Churn Rate              â”‚ 1.9% (ğŸŸ¢ Healthy < 5%)           â”‚
â”‚ Growth Rate             â”‚ 7.6%                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Disconnected Clients Details:                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Client   â”‚ Pkg    â”‚ Date     â”‚ Reason                â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ Ø£Ø­Ù…Ø¯     â”‚ 10Mbps â”‚ 02-10    â”‚ Ø¹Ø¯Ù… Ø§Ù„Ø³Ø¯Ø§Ø¯ 3 Ø£Ø´Ù‡Ø±    â”‚   â”‚
â”‚ â”‚ Ù…Ø­Ù…Ø¯     â”‚ 5Mbps  â”‚ 02-15    â”‚ Ø·Ù„Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ ğŸŸ¢ Churn Rate < 3%  = Excellent                            â”‚
â”‚ ğŸŸ¡ Churn Rate 3-5%  = Acceptable                           â”‚
â”‚ ğŸ”´ Churn Rate > 5%  = Critical â€” needs immediate action    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


3.5.3 ØªØ¹Ø¯ÙŠÙ„ Excel Builder
ÙÙŠ buildExcelXml() â€” Ø¥Ø¶Ø§ÙØ© Ø´ÙŠØªÙŠÙ† Ø¬Ø¯ÙŠØ¯ÙŠÙ†:

Ø´ÙŠØª "Period Comparison": Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„ÙØªØ±ÙŠØ© (MoM + YoY + QoQ)

Ø´ÙŠØª "Churn Analysis": ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ³Ø±Ø¨ Ù…Ø¹ Ø§Ù„ØªÙØ§ØµÙŠÙ„

3.5.4 ØªØ¹Ø¯ÙŠÙ„ PDF Builder
ÙÙŠ buildPdf() â€” Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù…ÙŠÙ†:

Ù‚Ø³Ù… "Period Comparison": Ø¨Ø¹Ø¯ Monthly Comparison Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø­Ø§Ù„ÙŠØ§Ù‹

Ù‚Ø³Ù… "Churn Analysis": Ø¨Ø¹Ø¯ Smart Insights

3.5.5 Ø¥Ø¶Ø§ÙØ© Churn Insights ÙÙŠ Smart Insights

// ÙÙŠ generateSmartInsights():

// Churn Rate Alert
if (churnReport != null) {
    val churnInsight = when {
        churnReport.churnRate > 5 -> SmartInsight(
            "ğŸ”´", "CRITICAL", "High Churn: ${"%.1f".format(churnReport.churnRate)}%",
            "${churnReport.disconnectedClients} clients lost this month â€” urgent retention needed"
        )
        churnReport.churnRate > 3 -> SmartInsight(
            "ğŸŸ¡", "WARNING", "Moderate Churn: ${"%.1f".format(churnReport.churnRate)}%",
            "${churnReport.disconnectedClients} clients disconnected â€” monitor closely"
        )
        else -> SmartInsight(
            "ğŸŸ¢", "SUCCESS", "Low Churn: ${"%.1f".format(churnReport.churnRate)}%",
            "Customer retention is healthy"
        )
    }
    insights.add(churnInsight)

    // Net Growth
    if (churnReport.netGrowth > 0) {
        insights.add(SmartInsight(
            "ğŸ“ˆ", "SUCCESS", "Net Growth: +${churnReport.netGrowth} clients",
            "Business is growing â€” ${churnReport.newClients} new vs ${churnReport.disconnectedClients} lost"
        ))
    } else if (churnReport.netGrowth < 0) {
        insights.add(SmartInsight(
            "ğŸ“‰", "CRITICAL", "Net Loss: ${churnReport.netGrowth} clients",
            "Losing more clients than gaining â€” review pricing and service quality"
        ))
    }
}


Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù… 3.5
 Ø¥Ø¶Ø§ÙØ© PeriodComparison data class

 Ø¥Ø¶Ø§ÙØ© ChurnReport Ùˆ ChurnClientDetail data classes

 Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ù„ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© (MoM, YoY, QoQ)

 Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ù„ Ø­Ø³Ø§Ø¨ Churn Ù…Ù† ClientDao

 Ø¥Ø¶Ø§ÙØ© Ø´ÙŠØª "Period Comparison" ÙÙŠ Excel builder

 Ø¥Ø¶Ø§ÙØ© Ø´ÙŠØª "Churn Analysis" ÙÙŠ Excel builder

 Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Period Comparison ÙÙŠ PDF builder

 Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Churn Analysis ÙÙŠ PDF builder

 Ø¥Ø¶Ø§ÙØ© Churn insights ÙÙŠ generateSmartInsights()

 Ø¥Ø¶Ø§ÙØ© Strings (Ø¹Ø±Ø¨ÙŠ + Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)

 Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª ÙØ¹Ù„ÙŠØ©

Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3 â€” ØªØ±ØªÙŠØ¨ Ø§Ù„ØªÙ†ÙÙŠØ°

Ø§Ù„Ø®Ø·ÙˆØ© 1: [3.1] Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ â† Ø§Ù„Ø£Ø³Ø§Ø³ Ù„ÙƒÙ„ Ø´ÙŠ Ø¨Ø¹Ø¯Ù‡
    â†“
Ø§Ù„Ø®Ø·ÙˆØ© 2: [3.2] ØªØ­Ø³ÙŠÙ† Excel (Freeze + Width) â† Ø³Ø±ÙŠØ¹ ÙˆÙ…Ø³ØªÙ‚Ù„
    â†“
Ø§Ù„Ø®Ø·ÙˆØ© 3: [3.3] QR Code â† Ø³Ø±ÙŠØ¹ ÙˆÙ…Ø³ØªÙ‚Ù„
    â†“
Ø§Ù„Ø®Ø·ÙˆØ© 4: [3.4] ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¨Ø§Ù‚Ø§Øª â† ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
    â†“
Ø§Ù„Ø®Ø·ÙˆØ© 5: [3.5] Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© + Churn â† ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ 3.1


| Ø§Ù„Ù…Ù„Ù                           | Ù†ÙˆØ¹ Ø§Ù„ØªØºÙŠÙŠØ±                                                |
| ------------------------------- | ---------------------------------------------------------- |
| Client.kt                       | ØªØ¹Ø¯ÙŠÙ„ â€” Ø¥Ø¶Ø§ÙØ© 3 Ø­Ù‚ÙˆÙ„                                       |
| ClientDao.kt                    | ØªØ¹Ø¯ÙŠÙ„ â€” Ø¥Ø¶Ø§ÙØ© Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª                                    |
| ClientDatabase.kt               | ØªØ¹Ø¯ÙŠÙ„ â€” Ø¥Ø¶Ø§ÙØ© Migration                                    |
| ClientViewModel.kt              | ØªØ¹Ø¯ÙŠÙ„ â€” Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ù„ Ø§Ù„Ø­Ø§Ù„Ø©                                  |
| ClientDetailsScreen.kt          | ØªØ¹Ø¯ÙŠÙ„ â€” Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø©                             |
| ClientListScreen.kt             | ØªØ¹Ø¯ÙŠÙ„ â€” Ø¥Ø¶Ø§ÙØ© ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„ÙÙ„ØªØ±Ø©                              |
| MainActivity.kt                 | ØªØ¹Ø¯ÙŠÙ„ â€” ØªØ¹Ø¯ÙŠÙ„ filterClients + ÙÙ„ØªØ± Ø§Ù„Ø­Ø§Ù„Ø©                  |
| PaymentsExportManager.kt        | ØªØ¹Ø¯ÙŠÙ„ â€” Freeze + Width + QR + Package + Comparison + Churn |
| DailyCollectionExportManager.kt | ØªØ¹Ø¯ÙŠÙ„ â€” Freeze + Width + QR                                |
| QrCodeGenerator.kt              | Ø¬Ø¯ÙŠØ¯ â€” Ù…ÙˆÙ„Ø¯ QR Code                                        |
| build.gradle.kts                | ØªØ¹Ø¯ÙŠÙ„ â€” Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© ZXing                                  |
| strings.xml                     | ØªØ¹Ø¯ÙŠÙ„ â€” Ù†ØµÙˆØµ Ø¬Ø¯ÙŠØ¯Ø© (Ø¹Ø±Ø¨ÙŠ + Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)                        |




